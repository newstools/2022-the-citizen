Colombo. Sri Lanka declared a state of emergency on Wednesday after the president fled overseas to escape anti-government protests, as thousands of people took to the streets, again furious that he had not yet stood down. President Gotabaya Rajapaksa had promised at the weekend to resign on Wednesday after escaping his official residence in Colombo just before tens of thousands of protesters overran it. As president, Rajapaksa enjoys immunity from arrest, and he is believed to have wanted to go abroad before stepping down to avoid the possibility of being detained. He, his wife and two bodyguards were the four passengers on a military aircraft that took off from Sri Lanka's main international airport, immigration sources told AFP. Hours later, with no formal announcement he was stepping down, thousands of demonstrators mobbed the office of Prime Minister Ranil Wickremesinghe -- whom Rajapaksa named as acting president during his absence -- demanding both officeholders should go. "Go home Ranil, Go home Gota," they shouted. Police fired tear gas to hold them back from overrunning the compound and officials declared a nationwide state of emergency, the prime minister's spokesman Dinouk Colombage told AFP. Police imposed an indefinite curfew across the Western Province, which includes Colombo, "to contain the situation", a senior police officer said. Wickremesinghe would automatically become acting president if Rajapaksa steps down, but has himself announced his willingness to resign if consensus is reached on forming a unity government. The prime minister's office confirmed that Rajapaksa had left the country, but said it had no schedule for any presidential resignation announcement. The succession process could take between three days -- the minimum time needed for parliament to elect an MP to serve out Rajapaksa's term, which ends in November 2024 -- and a maximum of 30 days allowed under the statute.  A complicated exit Rajapaksa is accused of mismanaging the economy to a point where the country ran out of foreign exchange to finance even the most essential imports, leading to severe hardships for its 22 million people. Earlier Wednesday, smiling Sri Lankans again thronged the corridors of the president's official residence after his departure, with young couples walking around hand in hand in a mood of quiet celebration. "People are very happy, because these people robbed our country," said retired civil servant Kingsley Samarakoon, 74. "They've stolen too much money, billions and billions." But he held little hope for an immediate improvement in Sri Lanka's plight. "How are people going to run the country without money?" he asked. "It's a problem." Sri Lanka defaulted on its $51 billion foreign debt in April and is in talks with the IMF for a possible bailout. The island has nearly exhausted its already scarce supplies of petrol. The government has ordered the closure of non-essential offices and schools to reduce commuting and save fuel. The departure of Rajapaksa, 73 and once known as "The Terminator", had been stymied for more than 24 hours in a humiliating standoff with immigration personnel in Colombo. He had wanted to fly to Dubai on a commercial flight, but staff at Bandaranaike International withdrew from VIP services and insisted that all passengers had to go through public counters. The presidential party was reluctant to go through regular channels, fearing public reactions, a security official said, and as a result, missed four flights on Monday that could have taken them to the United Arab Emirates. On arrival in the Maldives on Wednesday, Rajapaksa was driven to an undisclosed location under police escort, an airport official in the capital Male said. His youngest brother Basil, who resigned in April as finance minister, missed his own Emirates flight to Dubai on Tuesday after a tense standoff of his own with airport staff. Basil -- who holds US citizenship in addition to Sri Lankan -- tried to use a paid concierge service for business travellers, but airport and immigration staff said they had withdrawn from the fast-track service. The leader of the main opposition Samagi Jana Balawegaya party, Sajith Premadasa, who lost the 2019 presidential election to Rajapaksa, has said he will stand for the presidency. Premadasa is the son of former president Ranasinghe Premadasa, who was assassinated in a Tamil rebel suicide bombing in May 1993.